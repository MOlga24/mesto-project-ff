(()=>{"use strict";var e={d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),p:""};e.d({},{oS:()=>j});var t=document.querySelector("#card-template").content;function o(e){e.target.classList.toggle("card__like-button_is-active")}function r(e){e.closest(".card").remove()}function n(e,o,r,n){var c=t.querySelector(".card__image");c.setAttribute("alt",e.name),c.setAttribute("src",e.link);var a=t.querySelector(".places__item").cloneNode(!0);a.querySelector(".card__title").textContent=e.name,a.querySelector(".card__like-button").addEventListener("click",r);var i=a.querySelector(".card__delete-button");return i.addEventListener("click",(function(){o(i)})),a.querySelector(".card__image").addEventListener("click",n),a}function c(e){e.classList.add("popup_is-animated"),e.classList.add("popup_is-opened"),document.addEventListener("keydown",i)}function a(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",i)}function i(e){"Escape"===e.key&&a(document.querySelector(".popup_is-opened"))}function u(e){e.currentTarget===e.target&&a(e.currentTarget)}e.p;var p=".popup__form",s=".popup__input",d=".popup__button",l="popup__button_disabled",f="popup__input_type_error",m="popup__error_visible",_=".popup__error_visible";function y(){document.querySelectorAll(s).forEach((function(e){e.classList.remove(f)})),document.querySelectorAll(_).forEach((function(e){e.textContent="",e.classList.remove(m)}))}var v=function(e,t){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?function(e,t){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(f),o.classList.remove(m),o.textContent=""}(e,t):function(e,t,o){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.add(f),r.textContent=o,r.classList.add(m)}(e,t,t.validationMessage)},h=function(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.classList.remove(l),t.disabled=!1):(t.classList.add(l),t.disabled=!0)},S=document.querySelector(".popup_type_new-card"),q=document.querySelector(".profile__add-button"),b=document.querySelector(".popup_type_edit"),g=document.querySelector(".places__list"),k=document.querySelectorAll(".popup"),L=document.querySelector(".profile__edit-button"),E=document.querySelector(".popup_type_image"),x=E.querySelector(".popup__image"),A=document.querySelector(".profile__info");function C(){c(E);var e=E.querySelector(".popup__caption");x.src=this.src,e.textContent=this.alt}function j(e,t){A.querySelector(".profile__title").textContent=e,A.querySelector(".profile__description").textContent=t,function(e,t){fetch("https://nomoreparties.co/v1/wff-cohort-22/users/me",{method:"PATCH",headers:{authorization:"3bdecd97-cc83-4e5e-ac8d-e22694049ffd","Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})})}(e,t)}document.forms.edit_profile.addEventListener("submit",(function(e){j(document.forms.edit_profile.elements.name.value,document.forms.edit_profile.elements.description.value),e.preventDefault(),a(b)})),document.forms.new_place.addEventListener("submit",(function(e){var t=S.querySelector(".popup__input_type_card-name").value,c=S.querySelector(".popup__input_type_url").value;e.preventDefault();var i=n({name:t,link:c},r,o,C);g.prepend(i),a(S)})),document.addEventListener("click",(function(e){e.target===q&&(document.forms.new_place.reset(),y(),c(S)),e.target===L&&(y(),document.querySelector(".popup__input_type_name").value=A.querySelector(".profile__title").textContent,document.querySelector(".popup__input_type_description").value=A.querySelector(".profile__description").textContent,c(b))})),k.forEach((function(e){e.querySelector(".popup__close").addEventListener("click",(function(){a(e)}))})),k.forEach((function(e){e.addEventListener("click",u)})),g.textContent=" ",[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){g.append(n(e,r,o,C))})),fetch("https://nomoreparties.co/v1/wff-cohort-22/cards",{headers:{authorization:"3bdecd97-cc83-4e5e-ac8d-e22694049ffd"}}).then((function(e){return e.json()})).then((function(e){var t=Array.from(e);console.log(t)})),fetch("https://nomoreparties.co/v1/wff-cohort-22/users/me",{headers:{authorization:"3bdecd97-cc83-4e5e-ac8d-e22694049ffd"}}).then((function(e){return e.json()})).then((function(e){document.querySelector(".profile__image").setAttribute("style","background-image: url(".concat(e.avatar,")")),j(e.name,e.about),console.log(e.avatar)})),Array.from(document.querySelectorAll(".popup")).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),Array.from(e.querySelectorAll(p)).forEach((function(e){!function(e){var t=Array.from(e.querySelectorAll(s)),o=e.querySelector(d);h(t,o),t.forEach((function(r){r.addEventListener("input",(function(){h(t,o),v(e,r)}))}))}(e)}))}))})();