(()=>{"use strict";var e,t,r,o,n={866:(e,t,r)=>{r.a(e,(async(e,o)=>{try{r.d(t,{GO:()=>_,OX:()=>d,Rx:()=>m,TX:()=>y,Wo:()=>p,_o:()=>f,oe:()=>s,qk:()=>l});var n=r(850),c=e([n]);n=(c.then?(await c)():c)[0];var a={baseUrl:"https://nomoreparties.co/v1/wff-cohort-22",headers:{authorization:"3bdecd97-cc83-4e5e-ac8d-e22694049ffd","Content-Type":"application/json"}},i=await fetch("".concat(a.baseUrl,"/cards"),{headers:a.headers}),u=await i.json(),s=Array.from(u);function l(e,t){fetch("".concat(a.baseUrl,"/users/me"),{headers:a.headers}).then((function(e){return e.json()})).then((function(r){document.querySelector(".profile__image").setAttribute("style","background-image: url(".concat(r.avatar,")")),e=r.name,t=r.about,(0,n.oS)(e,t)}))}function d(e,t){fetch("".concat(a.baseUrl,"/users/me"),{method:"PATCH",headers:a.headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return e.json()}))}function p(e){fetch("".concat(a.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:a.headers,body:JSON.stringify({avatar:e})}).then((function(e){return e.json()})).then((function(t){e=t.avatar})).then(document.querySelector(".profile__image").setAttribute("style","background-image: url(".concat(e,")")))}function f(e,t){return fetch("".concat(a.baseUrl,"/cards"),{method:"POST",headers:{authorization:"3bdecd97-cc83-4e5e-ac8d-e22694049ffd","Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})})}function _(e,t){fetch("".concat(a.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:a.headers}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})),t.remove()}function m(e,t){return fetch("".concat(a.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:a.headers})}function y(e,t){return fetch("".concat(a.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:a.headers})}o()}catch(v){o(v)}}),1)},694:(e,t,r)=>{r.a(e,(async(e,o)=>{try{r.d(t,{Lq:()=>l,io:()=>d,zY:()=>s});var n=r(866),c=r(850),a=r(947),i=e([n,c]);[n,c]=i.then?(await i)():i;var u=document.querySelector("#card-template").content;function s(e,t,r,o){var i=u.querySelector(".card__image");i.setAttribute("alt",e.name),i.setAttribute("src",e.link);var s=u.querySelector(".places__item").cloneNode(!0);s.querySelector(".card__title").textContent=e.name;var l=e._id,d=s.querySelector(".card__like-button");s.querySelector(".like__num").textContent=e.likes.length;var f=s.querySelector(".card__delete-button");return e.hasOwnProperty("owner")&&"18224dc979a1237fbf3f98ed"!==e.owner._id&&f.remove(),f.addEventListener("click",(function(){(0,a.qf)(c.PU),document.forms.delete_card.addEventListener("submit",(function(){(0,a.Oo)(c.PU),t(f,l)}))})),s.querySelector(".card__image").addEventListener("click",o),d.addEventListener("click",(function(){p(e),p(e)?((0,n.TX)(e._id,d).then((function(e){return e.json()})).then((function(t){e.likes=t.likes,r(t.likes,d)})),d.classList.remove("card__like-button_is-active")):((0,n.Rx)(e._id,d).then((function(e){return e.json()})).then((function(t){e.likes=t.likes,r(t.likes,d)})),d.classList.add("card__like-button_is-active"))})),s}function l(e,t){var r=e.closest(".card");(0,n.GO)(t,r)}function d(e,t){t.nextElementSibling.textContent=e.length}function p(e){if(Array.from(e.likes).map((function(e){return{_id:e._id}})).find((function(e){return"18224dc979a1237fbf3f98ed"===e._id})))return!0}o()}catch(f){o(f)}}))},850:(e,t,r)=>{r.a(e,(async(e,o)=>{try{r.d(t,{PU:()=>h,oS:()=>L});var n=r(694),c=r(866),a=(r(117),r(947)),i=r(547),u=e([n,c]);[n,c]=u.then?(await u)():u;var s=document.querySelector(".popup_type_new-card"),l=document.querySelector(".profile__add-button"),d=document.querySelector(".popup_type_edit"),p=document.querySelector(".places__list"),f=document.querySelectorAll(".popup"),_=document.querySelector(".profile__edit-button"),m=document.querySelector(".popup_type_image"),y=m.querySelector(".popup__image"),v=document.querySelector(".profile__info"),h=document.querySelector(".popup_delete_image"),b=document.querySelector(".profile__image"),S=document.querySelector(".popup_edit_image");function q(e){e.target===l&&(document.forms.new_place.reset(),(0,i.RC)(),s.querySelector(".button").textContent="Сохранить",(0,a.qf)(s)),e.target===_&&((0,i.RC)(),document.querySelector(".popup__input_type_name").value=v.querySelector(".profile__title").textContent,document.querySelector(".popup__input_type_description").value=v.querySelector(".profile__description").textContent,d.querySelector(".button").textContent="Сохранить",(0,a.qf)(d))}function C(){(0,a.qf)(m);var e=m.querySelector(".popup__caption");y.src=this.src,e.textContent=this.alt}function E(e){p.textContent=" ",e.forEach((function(e){p.append((0,n.zY)(e,n.Lq,n.io,C))}))}function k(){this.querySelector(".button").textContent="Сохранение...";var e=s.querySelector(".popup__input_type_card-name").value,t=s.querySelector(".popup__input_type_url").value;event.preventDefault(),(0,c._o)(e,t).then((function(e){return e.json()})).then((function(e){return p.prepend((0,n.zY)(e,n.Lq,n.io,C))})),(0,a.Oo)(s)}function L(e,t){v.querySelector(".profile__title").textContent=e,v.querySelector(".profile__description").textContent=t,(0,c.OX)(e,t)}function g(e){this.querySelector(".button").textContent="Сохранение...",L(document.forms.edit_profile.elements.name.value,document.forms.edit_profile.elements.description.value),e.preventDefault(),(0,a.Oo)(d),document.forms.edit_profile.reset(),this.querySelector(".button").classList.add(".popup__button_disabled")}(0,c.qk)(),document.forms.edit_profile.addEventListener("submit",g),document.forms.new_place.addEventListener("submit",k),document.addEventListener("click",q),b.addEventListener("click",(function(){document.forms.popup_edit_image.reset(),S.querySelector(".button").textContent="Сохранить",(0,a.qf)(S)})),document.forms.popup_edit_image.addEventListener("submit",(function(){S.querySelector(".button").textContent="Сохранение...";var e=document.querySelector(".ava_link").value;(0,c.Wo)(e),(0,a.Oo)(S)})),f.forEach((function(e){e.querySelector(".popup__close").addEventListener("click",(function(){(0,a.Oo)(e)}))})),f.forEach((function(e){e.addEventListener("click",a.Us)})),E(c.oe),(0,i.F8)(i.Gs),o()}catch(x){o(x)}}))},947:(e,t,r)=>{function o(e){e.classList.add("popup_is-animated"),e.classList.contains("popup_type_image")||e.classList.contains("popup_delete_image")||e.querySelector(".button").classList.add("popup__button_disabled"),e.classList.add("popup_is-opened"),document.addEventListener("keydown",c)}function n(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",c)}function c(e){"Escape"===e.key&&n(document.querySelector(".popup_is-opened"))}function a(e){e.currentTarget===e.target&&n(e.currentTarget)}r.d(t,{Oo:()=>n,Us:()=>a,qf:()=>o})},547:(e,t,r)=>{r.d(t,{F8:()=>n,Gs:()=>o,RC:()=>c});var o={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible",errorSelector:".popup__error_visible"};function n(){Array.from(document.querySelectorAll(".popup")).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),Array.from(e.querySelectorAll(o.formSelector)).forEach((function(e){a(e)}))}))}function c(){document.querySelectorAll(o.inputSelector).forEach((function(e){e.classList.remove(o.inputErrorClass)})),document.querySelectorAll(o.errorSelector).forEach((function(e){e.textContent="",e.classList.remove(o.errorClass)}))}var a=function(e){var t=Array.from(e.querySelectorAll(o.inputSelector)),r=e.querySelector(o.submitButtonSelector);u(t,r),t.forEach((function(o){o.addEventListener("input",(function(){u(t,r),i(e,o)}))}))},i=function(e,t){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?function(e,t){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(o.inputErrorClass),r.classList.remove(o.errorClass),r.textContent=""}(e,t):function(e,t,r){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.add(o.inputErrorClass),n.textContent=r,n.classList.add(o.errorClass)}(e,t,t.validationMessage)},u=function(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.classList.remove(o.inactiveButtonClass),t.disabled=!1):(t.classList.add(o.inactiveButtonClass),t.disabled=!0)}},117:(e,t,r)=>{e.exports=r.p+"6666407ac3aa5af1d5de.jpg"}},c={};function a(e){var t=c[e];if(void 0!==t)return t.exports;var r=c[e]={exports:{}};return n[e](r,r.exports,a),r.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",o=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},a.a=(n,c,a)=>{var i;a&&((i=[]).d=-1);var u,s,l,d=new Set,p=n.exports,f=new Promise(((e,t)=>{l=t,s=e}));f[t]=p,f[e]=e=>(i&&e(i),d.forEach(e),f.catch((e=>{}))),n.exports=f,c((n=>{var c;u=(n=>n.map((n=>{if(null!==n&&"object"==typeof n){if(n[e])return n;if(n.then){var c=[];c.d=0,n.then((e=>{a[t]=e,o(c)}),(e=>{a[r]=e,o(c)}));var a={};return a[e]=e=>e(c),a}}var i={};return i[e]=e=>{},i[t]=n,i})))(n);var a=()=>u.map((e=>{if(e[r])throw e[r];return e[t]})),s=new Promise((t=>{(c=()=>t(a)).r=0;var r=e=>e!==i&&!d.has(e)&&(d.add(e),e&&!e.d&&(c.r++,e.push(c)));u.map((t=>t[e](r)))}));return c.r?s:a()}),(e=>(e?l(f[r]=e):s(p),o(i)))),i&&i.d<0&&(i.d=0)},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.p="",a(850)})();